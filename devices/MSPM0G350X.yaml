_svd: "./MSPM0G350X.svd"

_delete:
  # ADC[0,1]_SVT has been encorporated into ADC
  - "ADC?_SVT"
  # sysmem and flash are just memory regions, not peripherals
  - "SYSMEM"
  - "FLASH"

_modify:
  "DEBUGSS":
    groupName: "DEBUG"
  "FLASHCTL":
    groupName: "FLASH"

# "INT_GROUP0":
"WWDT0":
  _add:
    _interrupts:
      "INT_GROUP0":
        value: 16
        description: "WWDT0 interrupt handler"
"WWDT1":
  _add:
    _interrupts:
      "INT_GROUP0":
        value: 16
        description: "WWDT1 interrupt handler"

"DEBUGSS":
  _add:
    _interrupts:
      "INT_GROUP0":
        value: 16
        description: "Debug Subsystem interrupt handler"
  _strip:
    - "DEBUGSS_"

"FLASHCTL":
  _add:
    _interrupts:
      "INT_GROUP0":
        value: 16
        description: "Flash controller interrupt handler"

"WUC":
  _add:
    _interrupts:
      "INT_GROUP0":
        value: 16
        description: "Generic event subscriber 0 interrupt handler"
  _strip:
    - "WUC_"
# "WUC":
#   _add:
#     _interrupts:
#       "INT_GROUP0":
#         value: 16
#         description: 	"Generic event subscriber 1 interrupt handler"

"SYSCTL":
  _add:
    _interrupts:
      "INT_GROUP0":
        value: 16
        description: "PMCU (system controller) interrupt handler"
  _delete:
    - "SYSCTL_MGMT*"
  _strip:
    - "SYSCTL_"

# "INT_GROUP1":
"GPIOA":
  _add:
    _interrupts:
      "INT_GROUP1":
        value: 17
        description: "GPIOA interrupt handler"

"GPIOB":
  _add:
    _interrupts:
      "INT_GROUP1":
        value: 17
        description: "GPIOB interrupt handler"

"COMP0":
  _add:
    _interrupts:
      "INT_GROUP1":
        value: 17
        description: "COMP0 interrupt handler"

"COMP1":
  _add:
    _interrupts:
      "INT_GROUP1":
        value: 17
        description: "COMP1 interrupt handler"

"COMP2":
  _add:
    _interrupts:
      "INT_GROUP1":
        value: 17
        description: "COMP2 interrupt handler"

"TRNG":
  _add:
    _interrupts:
      "INT_GROUP1":
        value: 17
        description: "TRNG interrupt handler"
  _strip:
    - "TRNG_"
  _clusters:
    "TRNG*":
      _strip:
        - "TRNG_"

"TIMG8":
  _add:
    _interrupts:
      "TIMG8":
        value: 18
        description: "Timer TIMG8 interrupt handler"
"UART3":
  _add:
    _interrupts:
      "UART3":
        value: 19
        description: "UART3 interrupt handler"
"ADC0":
  _add:
    _interrupts:
      "ADC0":
        value: 20
        description: "ADCO interrupt handler"
"ADC1":
  _add:
    _interrupts:
      "ADC1":
        value: 21
        description: "ADC1 interrupt handler"
"CANFD0":
  _add:
    _interrupts:
      "CANFD0":
        value: 22
        description: "CAN-FD controller interrupt handler"
"DAC0":
  _add:
    _interrupts:
      "DAC0":
        value: 23
        description: "DACO interrupt handler"
"SPI0":
  _add:
    _interrupts:
      "SPI0":
        value: 25
        description: "SPIO interrupt handler"
"SPI1":
  _add:
    _interrupts:
      "SPI1":
        value: 26
        description: "SP|1 interrupt handler"
"UART1":
  _add:
    _interrupts:
      "UART1":
        value: 29
        description: "UART1 interrupt handler"
"UART2":
  _add:
    _interrupts:
      "UART2":
        value: 30
        description: "UART2 interrupt handler"
"UART0":
  _add:
    _interrupts:
      "UART0":
        value: 31
        description: "UARTO interrupt handler"
"TIMG0":
  _add:
    _interrupts:
      "TIMG0":
        value: 32
        description: "Timer TIMGO interrupt handler"
"TIMG6":
  _add:
    _interrupts:
      "TIMG6":
        value: 33
        description: "Timer TIMG6 interrupt handler"
"TIMA0":
  _add:
    _interrupts:
      "TIMA0":
        value: 34
        description: "Timer TIMAO interrupt handler"
"TIMA1":
  _add:
    _interrupts:
      "TIMA1":
        value: 35
        description: "Timer TIMA1 interrupt handler"
"TIMG7":
  _add:
    _interrupts:
      "TIMG7":
        value: 36
        description: "Timer TIMG7 interrupt handler"
"TIMG12":
  _add:
    _interrupts:
      "TIMG12":
        value: 37
        description: "Timer TIMG12 interrupt handler"
"I2C0":
  _add:
    _interrupts:
      "I2C0":
        value: 40
        description: "ICO interrupt handler"
"I2C1":
  _add:
    _interrupts:
      "I2C1":
        value: 41
        description: "12C1 interrupt handler"

"AES":
  _strip:
    - "AES_"
  _clusters:
    "AES*":
      _strip:
        - "AES_"
  _add:
    _interrupts:
      "AES":
        value: 44
        description: "AES accelerator interrupt handler"
"RTC":
  _strip:
    - "RTC_"
  _clusters:
    "RTC*":
      _strip:
        - "RTC_"
  _add:
    _interrupts:
      "RTC":
        value: 46
        description: "RTC interrupt handler"

"DMA":
  _strip:
    - "DMA_"
  _clusters:
    "DMA*":
      _strip:
        - "DMA_"
  _add:
    _interrupts:
      "DMA":
        value: 47
        description: "DMA interrupt handler"

"I2C?":
  _modify:
    _clusters:
      "I2C?_GPRCM\\[%s\\]":
        dim: 4
      "I2C?_CPU*\\[%s\\]":
        dim: 6
      "I2C?_DMA_TRIG?\\[%s\\]":
        dim: 6
      "I2C?_CONTROLLER\\[%s\\]":
        dim: 12
      "I2C?_TARGET\\[%s\\]":
        dim: 11
  _clusters:
    "I2C*":
      _strip:
        - "I2C*_"
  _strip:
    - "I2C*_"

"MATHACL":
  _strip:
    - "MATHACL_"
  _clusters:
    "MATHACL*":
      _strip:
        - "MATHACL_"

"CPUSS":
  _strip:
    - "CPUSS_"
  _clusters:
    "CPUSS*":
      _strip:
        - "CPUSS_"

"DAC?":
  _strip:
    - "DAC?_"
  _clusters:
    "DAC*":
      _strip:
        - "DAC?_"
  "CTL0":
    "RES":
      _replace_enum:
        "BITS_8": [0, "8-bit resolution"]
        "BITS_12": [1, "12-bit resolution"]
  "CTL3":
    "STIMCONFIG":
      _replace_enum:
        "SPS_500": [0, "Trigger rate is 500 sps (clock divide value is 4000)"]
        "SPS_1K": [1, "Trigger rate is 1 ksps (clock divide value is 2000)"]
        "SPS_2K": [2, "Trigger rate is 2 ksps (clock divide value is 1000)"]
        "SPS_4K": [3, "Trigger rate is 4 ksps (clock divide value is 500)"]
        "SPS_8K": [4, "Trigger rate is 8 ksps (clock divide value is 250)"]
        "SPS_16K": [5, "Trigger rate is 16 ksps (clock divide value is 125)"]
        "SPS_100K": [6, "Trigger rate is 100 ksps (clock divide value is 20)"]
        "SPS_200K": [7, "Trigger rate is 200 ksps (clock divide value is 10)"]
        "SPS_500K": [8, "Trigger rate is 500 ksps (clock divide value is 4)"]
        "SPS_1M": [9, "Trigger rate is 1 Msps (clock divide value is 2)"]

"GPIO?":
  _strip:
    - "GPIO?_"
  _clusters:
    "GPIO*":
      _strip:
        - "GPIO?_"

"ADC?":
  _strip:
    - "ADC?_"
  _clusters:
    "ADC*":
      _strip:
        - "ADC?_"
  _add:
    "FIFODATA":
      addressOffset: 0x1160
      description: "FIFO Data Register"
      size: 32
      access: "read-only"
    "MEMRES%s":
      addressOffset: 0x1280
      dim: 12
      dimIncrement: 4
      dimIndex: 0-11
      description: "Memory Result Register"
      size: 32
      access: "read-only"
      fields:
        "DATA":
          description: "MEMRES result register.\
            If DF = 0, unsigned binary:\
            The conversion results are right aligned. In 10 and 8 bit modes, the unused MSB bits are forced to 0.\
            If DF = 1, 2s-complement format:\
            The conversion results are left aligned. In 10 and 8 bit modes, the unused LSB bits are forced to 0.\
            The data is stored in the right-justified format and is converted to the left-justified 2s-complement format during read back."
          bitOffset: 0x0
          bitWidth: 0x10

"CANFD?":
  _strip:
    - "CANFD?_"
  "CANFD*":
    _strip:
      - "CANFD?_"
  _clusters:
    "CANFD*":
      _strip:
        - "CANFD?_"
        - "MCAN_"
      _clusters:
        "?~CANFD?_*":
          _strip:
            - "CANFD?_"
          _clusters:
            "?~CANFD?_*":
              _strip:
                - "CANFD?_"
                - "MCANSS_"

"WWDT?":
  _strip:
    - "WWDT?_"
  _clusters:
    "WWDT?*":
      _strip:
        - "WWDT?_"

"SPI?":
  _strip:
    - "SPI?_"
  _clusters:
    "SPI?*":
      _strip:
        - "SPI?_"

"EVENTLP":
  _strip:
    - "EVENTLP_"
  _clusters:
    "EVENTLP*":
      _strip:
        - "EVENTLP_"

"IOMUX":
  _strip:
    - "IOMUX_"

"CRC":
  _strip:
    - "CRC_"
  _clusters:
    "CRC*":
      _strip:
        - "CRC_"

"VREF":
  _strip:
    - "VREF_"
  _clusters:
    "VREF*":
      _strip:
        - "VREF_"

"OPA?":
  _strip:
    - "OPA?_"
  _clusters:
    "OPA?*":
      _strip:
        - "OPA?_"

"UART?":
  _strip:
    - "UART?_"
  _clusters:
    "UART*":
      _strip:
        - "UART?_"

"COMP?":
  _strip:
    - "COMP?_"
  _clusters:
    "COMP*":
      _strip:
        - "COMP?_"

"FLASHCTL*":
  _strip:
    - "FLASHCTL*"
  _modify:
    STATMODE:
      fields:
        BANKNOTINRD:
          bitOffset: 0
          bitWidth: 5

"TIM*":
  _strip:
    - "TIM??_"
    - "TIM???_"
  # modify cluster attributes
  _modify:
    _clusters:
      "TIM*_COUNTERREGS\\[%s\\]":
        dim: "9"
        _strip:
          - "TIM??_"
          - "TIM???_"

  _clusters:
    "TIM*":
      # strip prefixes that match TIMA0 and TIMG12
      _strip:
        - "TIM??_"
        - "TIM???_"
    "TIM*_COUNTERREGS\\[%s\\]":
      "IFCTL_*":
        "FP":
          _replace_enum:
            "PER_3": [0, "divions factor of 3"]
            "PER_5": [1, "divions factor of 5"]
            "PER_8": [2, "divions factor of 8"]
